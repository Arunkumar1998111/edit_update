<div class="modal fade" id="kt_modal_update_user" tabindex="-1" aria-hidden="true">
    <!--begin::Modal dialog-->
    <div class="modal-dialog modal-dialog-centered mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
            <!--begin::Modal header-->
            <div class="modal-header" id="kt_modal_add_user_header">
                <!--begin::Modal title-->
                <h2 class="fw-bold">Edit Details</h2>
                <div class="btn btn-icon btn-sm btn-active-icon-primary" data-kt-update-users-modal-action="close">
                    <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                    <span class="svg-icon svg-icon-1">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                            <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                        </svg>
                    </span>
                    <!--end::Svg Icon-->
                </div>
                <!--end::Close-->
            </div>
            <!--end::Modal header-->
            <!--begin::Modal body-->
            <div class="modal-body scroll-y mx-5 mx-xl-15 my-7">
                <!--begin::Form-->
                <form id="kt_modal_update_user" novalidate class="form" method="post" action="{% url 'update_user' %}">
                    {% csrf_token %}
                    <!--begin::Scroll-->
                    <div class="d-flex flex-column scroll-y me-n7 pe-7" id="kt_modal_add_user_scroll" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto" data-kt-scroll-dependencies="#kt_modal_add_user_header" data-kt-scroll-wrappers="#kt_modal_add_user_scroll" data-kt-scroll-offset="300px">
                        <!--begin::Input group-->
                        <input type="hidden" name="id_pk" id="Id_pk">
                        <div class="row g-9 mb-8">
                            <!--begin::Col-->
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <!--begin::Label-->
                                    <label class="required fw-semibold fs-6 mb-2">Employee ID</label>
                                    <input type="text" name="emp_id" class="form-control form-control-solid mb-3 mb-lg-0" id="Emp_id" placeholder="Enter employee ID" disabled />
                                    <!--end::Input-->
                                </div>
                            </div>
                            <!--end::Input group-->
                            <!--begin::Input group-->
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <!--begin::Label-->
                                    <label class="required fw-semibold fs-6 mb-2">Select Role</label>
                                    <!--end::Label-->
                                    <!--begin::Input-->
                                    <select class="form-select form-select-solid" name="user_role" data-control="select2" id="User_role" data-placeholder="Select role"  data-dropdown-parent="#kt_modal_update_user">
                                        <option></option>
                                        <option>Manager</option>
                                        <option>Employee</option>
                                        <option>Intern</option>
                                    </select>
                                    <!--end::Input-->
                                </div>
                            </div>
                        </div>
                        <!--end::Input group-->
                        <!--begin::Input group-->
                        <div class="row g-9 mb-8">
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <label class="required fw-semibold fs-6 mb-2">First Name</label>
                                    <input type="text" name="user_first_name" id="User_first_name" class="form-control form-control-solid mb-3 mb-lg-0" placeholder="Enter first name" />
                                </div>
                            </div>
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <label class="required fw-semibold fs-6 mb-2">Last Name</label>
                                    <input type="text" name="user_last_name" id="User_last_name" class="form-control form-control-solid mb-3 mb-lg-0" placeholder="Enter last name" />
                                </div>
                            </div>
                        </div>
                        <!--begin::Input group-->
                        <div class="row g-9 mb-8">
                            <!--begin::Col-->
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <!--begin::Label-->
                                    <label class="required fw-semibold fs-6 mb-2">Reporting Manager</label>
                                    <!--end::Label-->
                                    <!--begin::Input-->
                                    <select class="form-select form-select-solid" name="user_manager" id="User_manager" data-control="select2" data-placeholder="Select reporting manager"  data-dropdown-parent="#kt_modal_update_user">
                                        <option></option>
                                        {% for each in managers %}
                                            {% if each.role == "Admin" or each.role == "Manager" %}
                                            <option value="{{each.id}}">{{each.first_name}}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                    <!--end::Input-->
                                </div>
                            </div>
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <!--begin::Label-->
                                    <label class="required fw-semibold fs-6 mb-2">Designation</label>
                                    <!--end::Label-->
                                    <!--begin::Input-->
                                    <select class="form-select form-select-solid" name="user_designation" id="User_designation" data-control="select2" data-placeholder="Select designation"  data-dropdown-parent="#kt_modal_update_user">
                                        <option></option>
                                        {% for each in designation %}
                                        <option value="{{each.id}}">{{each.name}}</option>
                                        {% endfor %}
                                    </select>
                                    <!--end::Input-->
                                </div>
                        </div>
                       
                        <div class="row g-9 mb-8">
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <label class="required fw-semibold fs-6 mb-2">Email ID</label>
                                    <input type="email" name="user_email" id="User_email" class="form-control form-control-solid mb-3 mb-lg-0" placeholder="Enter email ID" />
                                </div>
                                <span id="update_email_error"></span>
                            </div>
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <label class="required fw-semibold fs-6 mb-2">Contact No.</label>
                                    <input type="text" name="user_contact" id="User_contact" class="form-control form-control-solid mb-3 mb-lg-0" placeholder="Enter contact no." />
                                </div>
                                <span id="update_contact_error"></span>
                            </div>
                        </div>
                        {% if request.user.role == "Admin" %}
                        <div class="row g-9 mb-8">
                            <div class="col-md-6 fv-row">
                                <div class="fv-row">
                                    <label class="required fw-semibold fs-6 mb-2">Cost/Hour (&#8377;)</label>
                                    <input type="text" name="cost_per_hours" id="Cost_per_hours" class="form-control form-control-solid mb-3 mb-lg-0" placeholder="Enter cost per hour" />
                                </div>
                            </div>
                            
                        </div>
                        {%endif%}
                    </div>
                    <div class="text-center pt-15">
                        <button type="reset" class="btn btn-light me-3" data-kt-update-users-modal-action="cancel">Reset</button>
                        <button type="submit" id="update-submit-button" class="btn btn-primary" data-kt-update-users-modal-action="submit">
                            <span class="indicator-label">Save</span>
                            <span class="indicator-progress">Please wait...
                            <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                        </button>
                    </div>
                    <!--end::Actions-->
                </form>
                <!--end::Form-->
            </div>
            <!--end::Modal body-->
        </div>
        <!--end::Modal content-->
    </div>
    <!--end::Modal dialog-->
</div>







<!-- update user ajax    user.html -->
<script>
	function updatefun(id){
		$.ajax({
                method: "GET",
                url: `/userupdatedata/${id}`,
                success: function (response) {
                    console.log(response)
                    r = response;
					document.getElementById("Id_pk").value = r.user_id;
                    document.getElementById("Emp_id").value = r.user_empid;
                    document.getElementById("User_contact").value = r.user_contact;
                    document.getElementById("User_first_name").value = r.user_name;
                    document.getElementById("User_last_name").value = r.user_surname;
                    document.getElementById("User_email").value = r.user_email;
                    
                    $('#Employee_type').trigger('change');
					document.getElementById("User_role").value = r.user_role;
					
                    $('#User_role').trigger('change');
					document.getElementById("User_manager").value = r.user_manager;
					
                    $('#User_manager').trigger('change');
                    document.getElementById("User_designation").value = r.user_department;
                    
                    $('#User_designation').trigger('change');
                    document.getElementById("Cost_per_hours").value = r.cost_per_hour;
				}
		});
	}
</script>